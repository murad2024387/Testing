<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase Chat with Authentication</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .container {
      width: 100%;
      max-width: 900px;
      background-color: rgba(255, 255, 255, 0.92);
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    header {
      background: linear-gradient(90deg, #4285F4, #34A853);
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo i {
      font-size: 28px;
    }
    
    .logo h1 {
      font-weight: 600;
      font-size: 24px;
    }
    
    .auth-container {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 500;
      background: rgba(255, 255, 255, 0.2);
      padding: 8px 15px;
      border-radius: 50px;
    }
    
    .user-icon {
      background: #fff;
      color: #4285F4;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
    }
    
    .auth-btn {
      background: white;
      color: #4285F4;
      border: none;
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .auth-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }
    
    .auth-btn:active {
      transform: translateY(0);
    }
    
    .auth-btn.signout {
      background: #EA4335;
      color: white;
    }
    
    main {
      display: flex;
      flex: 1;
      height: 500px;
    }
    
    .sidebar {
      width: 250px;
      background-color: #f5f8fa;
      border-right: 1px solid #e0e6ed;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .sidebar h2 {
      color: #2d3748;
      font-size: 18px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .stats {
      background: white;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    
    .stat-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #edf2f7;
    }
    
    .stat-item:last-child {
      border-bottom: none;
    }
    
    .stat-label {
      color: #718096;
      font-weight: 500;
    }
    
    .stat-value {
      color: #2d3748;
      font-weight: 600;
    }
    
    .chat-container {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    .messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background-color: #f0f4f8;
    }
    
    .message {
      background: white;
      border-radius: 12px;
      padding: 12px 16px;
      margin-bottom: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      max-width: 80%;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .message.sent {
      background: #4285F4;
      color: white;
      margin-left: auto;
    }
    
    .message-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 14px;
    }
    
    .message-sender {
      font-weight: 600;
    }
    
    .message-time {
      opacity: 0.8;
      font-size: 12px;
    }
    
    .message-content {
      line-height: 1.4;
    }
    
    .input-container {
      display: flex;
      padding: 20px;
      background: white;
      border-top: 1px solid #e0e6ed;
    }
    
    .message-input {
      flex: 1;
      padding: 14px 18px;
      border: 2px solid #e0e6ed;
      border-radius: 12px;
      font-size: 16px;
      outline: none;
      transition: border-color 0.3s;
    }
    
    .message-input:focus {
      border-color: #4285F4;
    }
    
    .send-button {
      background: #4285F4;
      color: white;
      border: none;
      border-radius: 12px;
      padding: 0 25px;
      margin-left: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .send-button:hover {
      background: #3367D6;
    }
    
    .send-button:disabled {
      background: #a0aec0;
      cursor: not-allowed;
    }
    
    .welcome-screen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 40px;
      flex: 1;
      background: #f0f4f8;
    }
    
    .welcome-screen h2 {
      color: #2d3748;
      font-size: 32px;
      margin-bottom: 20px;
    }
    
    .welcome-screen p {
      color: #4a5568;
      font-size: 18px;
      max-width: 500px;
      line-height: 1.6;
      margin-bottom: 30px;
    }
    
    .features {
      display: flex;
      gap: 30px;
      margin-top: 30px;
    }
    
    .feature {
      background: white;
      border-radius: 12px;
      padding: 25px;
      width: 200px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
    }
    
    .feature i {
      font-size: 36px;
      color: #4285F4;
      margin-bottom: 15px;
    }
    
    .feature h3 {
      color: #2d3748;
      margin-bottom: 10px;
    }
    
    .feature p {
      color: #718096;
      font-size: 14px;
      margin-bottom: 0;
    }
    
    .status-bar {
      background: #f5f8fa;
      border-top: 1px solid #e0e6ed;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      color: #718096;
      font-size: 14px;
    }
    
    .connection-status {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #48BB78;
    }
    
    .status-dot.offline {
      background: #E53E3E;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: #4a5568;
    }
    
    .loading i {
      font-size: 36px;
      margin-bottom: 20px;
      color: #4285F4;
      animation: spin 1.5s linear infinite;
    }
    
    @keyframes spin {
      100% { transform: rotate(360deg); }
    }
    
    @media (max-width: 768px) {
      main {
        flex-direction: column;
        height: auto;
      }
      
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #e0e6ed;
      }
      
      .features {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <i class="fas fa-comments"></i>
        <h1>Firebase Chat</h1>
      </div>
      <div class="auth-container">
        <div class="user-info" id="userInfo" style="display: none;">
          <div class="user-icon" id="userIcon">U</div>
          <span id="userName">User</span>
        </div>
        <button id="authButton" class="auth-btn">
          <i class="fab fa-google"></i>
          <span>Sign in with Google</span>
        </button>
      </div>
    </header>
    
    <main>
      <div class="sidebar">
        <h2><i class="fas fa-chart-bar"></i> Dashboard</h2>
        <div class="stats">
          <div class="stat-item">
            <span class="stat-label">Online Users</span>
            <span class="stat-value" id="onlineUsers">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Messages Sent</span>
            <span class="stat-value" id="messagesSent">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Your Messages</span>
            <span class="stat-value" id="yourMessages">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Active Now</span>
            <span class="stat-value" id="activeNow">0</span>
          </div>
        </div>
        
        <h2><i class="fas fa-users"></i> Online Now</h2>
        <div class="stats">
          <div class="stat-item">
            <span class="stat-label">John Doe</span>
            <span class="stat-value">Online</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Jane Smith</span>
            <span class="stat-value">Online</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Mike Johnson</span>
            <span class="stat-value">Online</span>
          </div>
        </div>
      </div>
      
      <div class="chat-container">
        <div class="messages" id="messagesContainer">
          <div class="welcome-screen" id="welcomeScreen">
            <h2>Welcome to Firebase Chat</h2>
            <p>Sign in with Google to start chatting in real-time with other users. Your messages are securely stored in Firebase Firestore.</p>
            <button class="auth-btn">
              <i class="fab fa-google"></i>
              <span>Sign in with Google</span>
            </button>
            
            <div class="features">
              <div class="feature">
                <i class="fas fa-shield-alt"></i>
                <h3>Secure</h3>
                <p>Google-authenticated and encrypted data storage</p>
              </div>
              <div class="feature">
                <i class="fas fa-bolt"></i>
                <h3>Real-time</h3>
                <p>Instant message delivery with Firebase</p>
              </div>
              <div class="feature">
                <i class="fas fa-chart-line"></i>
                <h3>Analytics</h3>
                <p>Track your chat activity with our dashboard</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="input-container" id="inputContainer" style="display: none;">
          <input type="text" class="message-input" id="messageInput" placeholder="Type your message...">
          <button class="send-button" id="sendButton" disabled>
            <i class="fas fa-paper-plane"></i> Send
          </button>
        </div>
      </div>
    </main>
    
    <div class="status-bar">
      <div class="connection-status">
        <div class="status-dot" id="statusDot"></div>
        <span id="statusText">Connecting to Firebase...</span>
      </div>
      <div id="messageCounter">Messages loaded: 0</div>
    </div>
  </div>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBEtLS0v4FJpHy11OsFwAJMUTo4W-ZvxVs",
      authDomain: "muradapps-dbe17.firebaseapp.com",
      projectId: "muradapps-dbe17",
      storageBucket: "muradapps-dbe17.appspot.com",
      messagingSenderId: "117855279460",
      appId: "1:117855279460:web:3403584abd902e5d628271"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    
    // DOM elements
    const authButton = document.getElementById('authButton');
    const userInfo = document.getElementById('userInfo');
    const userName = document.getElementById('userName');
    const userIcon = document.getElementById('userIcon');
    const messagesContainer = document.getElementById('messagesContainer');
    const messageInput = document.getElementById('messageInput');
    const sendButton = document.getElementById('sendButton');
    const welcomeScreen = document.getElementById('welcomeScreen');
    const inputContainer = document.getElementById('inputContainer');
    const statusDot = document.getElementById('statusDot');
    const statusText = document.getElementById('statusText');
    const messageCounter = document.getElementById('messageCounter');
    const onlineUsers = document.getElementById('onlineUsers');
    const messagesSent = document.getElementById('messagesSent');
    const yourMessages = document.getElementById('yourMessages');
    const activeNow = document.getElementById('activeNow');
    
    // Demo stats data
    let stats = {
      onlineUsers: 12,
      messagesSent: 427,
      yourMessages: 0,
      activeNow: 3
    };
    
    // Update stats display
    function updateStats() {
      onlineUsers.textContent = stats.onlineUsers;
      messagesSent.textContent = stats.messagesSent;
      yourMessages.textContent = stats.yourMessages;
      activeNow.textContent = stats.activeNow;
    }
    
    // Initialize stats
    updateStats();
    
    // Update connection status
    function updateConnectionStatus(connected) {
      if (connected) {
        statusDot.className = 'status-dot';
        statusText.textContent = 'Connected to Firebase';
      } else {
        statusDot.className = 'status-dot offline';
        statusText.textContent = 'Disconnected from Firebase';
      }
    }
    
    // Simulate connection status
    updateConnectionStatus(true);
    
    // Format timestamp
    function formatTimestamp(timestamp) {
      if (!timestamp) return '';
      const date = timestamp.toDate();
      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }
    
    // Add message to UI
    function addMessageToUI(message, isCurrentUser) {
      const messageElement = document.createElement('div');
      messageElement.className = `message ${isCurrentUser ? 'sent' : ''}`;
      
      messageElement.innerHTML = `
        <div class="message-header">
          <span class="message-sender">${isCurrentUser ? 'You' : message.senderName}</span>
          <span class="message-time">${formatTimestamp(message.timestamp)}</span>
        </div>
        <div class="message-content">${message.text}</div>
      `;
      
      messagesContainer.insertBefore(messageElement, messagesContainer.firstChild);
      
      // Update message counter
      const count = messagesContainer.querySelectorAll('.message').length;
      messageCounter.textContent = `Messages loaded: ${count}`;
    }
    
    // Load sample messages
    function loadSampleMessages() {
      const sampleMessages = [
        { text: "Hello everyone! 👋", senderName: "John Doe", timestamp: new Date(Date.now() - 1000 * 60 * 5) },
        { text: "Has anyone tried the new Firebase features?", senderName: "Jane Smith", timestamp: new Date(Date.now() - 1000 * 60 * 3) },
        { text: "Yes, they're amazing! I especially like the new security rules.", senderName: "Mike Johnson", timestamp: new Date(Date.now() - 1000 * 60 * 2) },
        { text: "Welcome to our Firebase chat demo. Sign in to start chatting!", senderName: "System", timestamp: new Date(Date.now() - 1000 * 60 * 1) }
      ];
      
      sampleMessages.forEach(msg => {
        addMessageToUI(msg, false);
      });
    }
    
    // Load initial messages
    loadSampleMessages();
    
    // Sign in with Google
    function signInWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then((result) => {
          console.log('Sign in successful', result.user);
        })
        .catch((error) => {
          console.error('Sign in error', error);
        });
    }
    
    // Sign out
    function signOut() {
      auth.signOut()
        .then(() => {
          console.log('Sign out successful');
        })
        .catch((error) => {
          console.error('Sign out error', error);
        });
    }
    
    // Handle authentication state changes
    auth.onAuthStateChanged((user) => {
      if (user) {
        // User is signed in
        const displayName = user.displayName || 'User';
        const firstLetter = displayName.charAt(0).toUpperCase();
        
        userName.textContent = displayName;
        userIcon.textContent = firstLetter;
        userInfo.style.display = 'flex';
        
        authButton.innerHTML = '<i class="fas fa-sign-out-alt"></i> <span>Sign Out</span>';
        authButton.className = 'auth-btn signout';
        authButton.onclick = signOut;
        
        welcomeScreen.style.display = 'none';
        inputContainer.style.display = 'flex';
        sendButton.disabled = false;
        
        // Update stats with user-specific data
        stats.yourMessages = Math.floor(Math.random() * 20) + 5;
        updateStats();
      } else {
        // User is signed out
        userInfo.style.display = 'none';
        
        authButton.innerHTML = '<i class="fab fa-google"></i> <span>Sign in with Google</span>';
        authButton.className = 'auth-btn';
        authButton.onclick = signInWithGoogle;
        
        welcomeScreen.style.display = 'flex';
        inputContainer.style.display = 'none';
      }
    });
    
    // Send message
    function sendMessage() {
      const text = messageInput.value.trim();
      if (text && auth.currentUser) {
        // In a real app, you would save to Firestore here
        const user = auth.currentUser;
        const displayName = user.displayName || 'User';
        
        const newMessage = {
          text: text,
          senderId: user.uid,
          senderName: displayName,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        };
        
        // Add message to UI
        addMessageToUI(newMessage, true);
        
        // Clear input
        messageInput.value = '';
        
        // Update stats
        stats.messagesSent++;
        stats.yourMessages++;
        updateStats();
      }
    }
    
    // Event listeners
    sendButton.addEventListener('click', sendMessage);
    
    messageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });
    
    messageInput.addEventListener('input', () => {
      sendButton.disabled = messageInput.value.trim() === '';
    });
    
    // Initialize auth button
    authButton.onclick = signInWithGoogle;
    
    // Simulate real-time updates
    setInterval(() => {
      stats.activeNow = Math.floor(Math.random() * 5) + 1;
      stats.onlineUsers = Math.floor(Math.random() * 5) + 10;
      updateStats();
    }, 10000);
  </script>
</body>
</html>
